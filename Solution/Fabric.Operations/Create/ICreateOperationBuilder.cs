using Fabric.Infrastructure.Data;
using Weaver.Core.Query;

namespace Fabric.Operations.Create {

	/*================================================================================================*/
	public interface ICreateOperationBuilder {


		////////////////////////////////////////////////////////////////////////////////////////////////
		/*--------------------------------------------------------------------------------------------*/
		void SetDataAccess(IDataAccess pDataAcc);

		////////////////////////////////////////////////////////////////////////////////////////////////
		/*--------------------------------------------------------------------------------------------*/
		void AddQuery(IWeaverQuery pQuery, bool pCache=false, string pAppendScript=null);

		/*--------------------------------------------------------------------------------------------*/
		string SetupLatestCommand(bool pOmitResults=false, bool pNewCondition=false);


		////////////////////////////////////////////////////////////////////////////////////////////////
		/*--------------------------------------------------------------------------------------------*/
		void StartSession();

		/*--------------------------------------------------------------------------------------------*/
		void CommitAndCloseSession();


		////////////////////////////////////////////////////////////////////////////////////////////////
		/*--------------------------------------------------------------------------------------------*/
		void AddCheck(IDataResultCheck pCheck);
		
		/*--------------------------------------------------------------------------------------------*/
		void PerformChecks(IDataResult pResult);

	}

}