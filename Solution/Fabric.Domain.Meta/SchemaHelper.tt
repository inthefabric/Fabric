<#@ template debug="true" hostspecific="true" language="C#" #>
<#@ assembly name="$(SolutionDir)..\Packages\Weaver.0.5.4\lib\Weaver.Core.dll" #>
<#@ assembly name="$(SolutionDir)..\Packages\Weaver.Titan.0.5.4\lib\Weaver.Titan.dll" #>
<#@ assembly name="$(ProjectDir)bin\Debug\Fabric.Domain.Meta.dll" #>
<#@ import namespace="System" #>
<#@ import namespace="Fabric.Domain.Meta" #>
<#@ import namespace="Weaver.Core.Schema" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ output extension=".cs" #>
// GENERATED CODE
// Changes made to this source file will be overwritten
// Generated on <#= DateTime.Now.ToString() #>

using System.Collections.Generic;

namespace Fabric.Domain.Meta {

	/*================================================================================================*/
	public static partial class SchemaHelper {
		
		
		////////////////////////////////////////////////////////////////////////////////////////////////
		/*--------------------------------------------------------------------------------------------*/
		public static IList<string> GetEdgeTypes() {
			return new List<string> {
<#
var schema = new Schema();
var edgeTypeMap = new Dictionary<string, bool>();
var edgeMap = new Dictionary<string, bool>();

foreach ( WeaverEdgeSchema edge in schema.Edges ) {
	if ( edgeTypeMap.ContainsKey(edge.EdgeType) ) { continue; }
	edgeTypeMap.Add(edge.EdgeType, true);
#>
				"<#= edge.EdgeType #>",
<#
} // end edge loop
#>
			};
		}
		
		
		////////////////////////////////////////////////////////////////////////////////////////////////
		/*--------------------------------------------------------------------------------------------*/
		public static SchemaHelperEdge GetEdge(string pName) {
			var s = SchemaInstance;

			switch ( pName ) {
<#
int ri = 0;

foreach ( WeaverEdgeSchema edge in schema.Edges ) {
	var fromVertex = edge.OutVertex.Name;
	var toVertex = edge.InVertex.Name;
	string edgeClass = fromVertex+edge.Name+toVertex;
		
	if ( edgeMap.ContainsKey(edgeClass) ) { continue; }
	edgeMap.Add(edgeClass, true);
#>
				case "<#= edgeClass #>": return new SchemaHelperEdge(s.Edges[<#= ri #>]);
<#
	++ri;
} //end edge loop
#>
			}

			return null;
		}

		/*--------------------------------------------------------------------------------------------*/
		public static IList<string> GetEdges() {
			return new List<string> {
<#
foreach ( string key in edgeMap.Keys ) {
#>
				"<#= key #>",
<#
} // end keys loop
#>
			};
		}
		
		
		////////////////////////////////////////////////////////////////////////////////////////////////
		/*--------------------------------------------------------------------------------------------*/
		public static SchemaHelperVertex GetVertex(string pName) {
			var s = SchemaInstance;

			switch ( pName ) {
<#
int ni = 0;

foreach ( WeaverVertexSchema vertex in schema.Vertices ) {
#>
				case "<#= vertex.Name #>": return new SchemaHelperVertex(s.Vertices[<#= ni #>]);
<#
	++ni;
} //end vertex loop
#>
			}

			return null;
		}

		/*--------------------------------------------------------------------------------------------*/
		public static IList<string> GetVertices() {
			return new List<string> {
<#
foreach ( WeaverVertexSchema vertex in schema.Vertices ) {
#>
				"<#= vertex.Name #>",
<#
} // end vertex loop
#>
			};
		}

		
		////////////////////////////////////////////////////////////////////////////////////////////////
		/*--------------------------------------------------------------------------------------------*/
		public static IList<string> GetRootLinks() {
			return new List<string> {
<#
foreach ( WeaverVertexSchema vertex in schema.Vertices ) {
	if ( vertex.IsAbstract || vertex.IsInternal ) {
		continue;
	}
#>
				"<#= vertex.Name #>",
<#
} //end vertex loop
#>
			};
		}
		
		
		////////////////////////////////////////////////////////////////////////////////////////////////
		/*--------------------------------------------------------------------------------------------*/
		public static SchemaHelperProp GetProp(string pName) {
			var s = SchemaInstance;
			
			switch ( pName ) {
<#
int pi = 0;

foreach ( FabricPropSchema prop in schema.Props ) {
#>
				case "<#= prop.DbName #>": return new SchemaHelperProp(s.Props[<#= pi #>]);
<#
	++pi;
} //end prop loop
#>
			}

			return null;
		}

		/*--------------------------------------------------------------------------------------------*/
		public static IList<string> GetProps() {
			return new List<string> {
<#
foreach ( WeaverPropSchema prop in schema.Props ) {
#>
				"<#= prop.DbName #>",
<#
} // end prop loop
#>
			};
		}

	}

}